!function(){function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function e(e){if(Array.isArray(e))return t(e)}function n(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}function o(t){return e(t)||n(t)||i(t)||r()}function s(t){return t&&t.constructor===Symbol?"symbol":typeof t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function c(t,e){return u(t,e)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t,e,n){return h=f()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&c(i,n.prototype),i},h.apply(null,arguments)}function p(t,e,n){return h.apply(null,arguments)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function v(t){return d(t)}function y(t){var e="function"==typeof Map?new Map:void 0;return y=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return p(t,arguments,v(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,t)},y(t)}function g(t){return y(t)}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?b(t):e}function w(t){var e=m();return function(){var n,r=v(t);if(e){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return k(this,n)}}var _=function(){},E={logException:function(t){return console.error(t)},_log:_},R=Object.assign({},E);var A="[SPRED ERROR]",C=function(t){"use strict";l(n,t);var e=w(n);function n(){var t;return a(this,n),(t=e.call(this)).name=A,t.message="Circular dependency detected",t}return n}(g(Error)),O=function(t){"use strict";l(n,t);var e=w(n);function n(){var t;return a(this,n),(t=e.call(this)).name=A,t.message="State data must be a plain object or an array or a primitive",t}return n}(g(Error)),N=null,x=null,S=null,T=0,P=0,M=[],I=[],B={};function L(t,e){var n,r=N,i=x,s=P;return N&&(x=N),P=0,N=null,n=e?t.apply(void 0,o(e)):t(),N=r,x=i,P=s,n}function D(t){var e=R._notificationWrapper;T++,t(),T--,e?e(q):q()}function j(t,e){var n=R._notificationWrapper;return arguments.length>1?t.nextValue="function"==typeof e?e(t.nextValue):e:t.forced=!0,t.i=M.push(t)-1,n?n(q):q(),t.nextValue}function F(t){Y(t,"ACTIVATE"),t.onActivate&&t.onActivate(t.value)}function U(t,e){Y(t,"UPDATE",e),t.onUpdate&&t.onUpdate(e,t.value)}function z(t,e){var n=e.filter,r=e.value;return n?"function"!=typeof n||n(t,r):!Object.is(t,r)}function q(){if(M.length&&!T){var t=M,e=M.length,n=P;M=[],B={},P=2,++T;for(var r=0;r<t.length;r++){var i=t[r];if(i.i===r){var o=!0,s=!i.compute;if(s&&(o=z(i.nextValue,i)||i.forced,i.forced=!1,o&&(U(i,i.nextValue),i.value=i.nextValue)),o)for(var a=i.ft;null!==a;a=a.nt)"object"==typeof a.t?(++a.t.dirty,a.t.i=t.push(a.t)-1):s&&(I.push(a.t),I.push(i.value))}}for(var u=e;u<t.length;u++){var c=t[u];if(c.i===u&&c.version!==B&&c.ft){var l=c.value,f=!1;if(c.dirty&&(f=z(l=H(c),c)||c.hasException),f){if(!c.hasException){U(c,l),c.value=l;for(var h=c.subs,p=c.ft;h&&null!==p;p=p.nt)"function"==typeof p.t&&(I.push(p.t),I.push(c.value),--h)}}else for(var d=c.ft;null!==d;d=d.nt)"object"==typeof d.t&&--d.t.dirty;c.version=B,c.dirty=0}}P=n;for(var v=0;v<I.length;v+=2)I[v](I[v+1]);I=[],--T,q()}}function V(t,e){if(t.compute){if(t.freezed)return t.value;if(t.tracking)throw new C;if(!t.ft&&(P||t.version!==B)){var n=H(t,e);z(n,t)&&(t.value=n)}t.version=B}return N&&!e&&(t.hasException&&!N.hasException&&(N.exception=t.exception,N.hasException=!0),P&&(S?(S.s!==t&&(S.s.ft===S&&(S.s.ft=S.nt),S.s.lt===S&&(S.s.lt=S.pt),S.pt&&(S.pt.nt=S.nt),S.nt&&(S.nt.pt=S.pt),S.nt=null,S.pt=t.lt,S.s=t,t.lt?t.lt.nt=S:t.ft=S,t.lt=S),S=S.ns):function(t,e){var n={s:t,t:e,ps:e.ls,ns:null,pt:null,nt:null,stale:!1,cached:0};e.ls?e.ls.ns=n:e.fs=n;e.ls=n,n.pt=t.lt,t.lt?t.lt.nt=n:(t.ft=n,F(n.s));t.lt=n}(t,N))),t.value}function H(t,e){var n=N,r=S,i=t.value;t.children&&W(t),N=t,S=t.fs,t.tracking=!0,t.hasException=!1;try{i=t.compute(t.value,2===P)}catch(e){t.exception=e,t.hasException=!0}if(t.hasException){if(t.catch)try{i=t.catch(t.exception,t.value),t.hasException=!1,t.exception=void 0}catch(e){t.exception=e}t.hasException&&(Y(t,"EXCEPTION"),t.onException&&t.onException(t.exception),(e||t.subs||!t.ft&&!N)&&R.logException(t.exception))}if(P){for(;S;)X(S),S=S.nt;t.fs||(t.freezed=!0)}return t.tracking=!1,N=n,S=r,i}function W(t){if(t.children&&t.children.length){var e=!0,n=!1,r=void 0;try{for(var i,o=t.children[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;"function"==typeof s?s():W(s)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}t.children=[]}}function Y(t,e,n){if(t.name){var r=t.value;"EXCEPTION"===e?r=t.exception:"UPDATE"===e&&(r={prevValue:t.value,value:n}),R._log(t.name,e,r)}}function G(t,e){var n={s:t,t:e,pt:t.lt,nt:null};return t.lt?t.lt.nt=n:(t.ft=n,F(n.s)),t.lt=n,n}function X(t){if(t.t.fs===t&&(t.t.fs=t.ns),t.t.ls===t&&(t.t.ls=t.ps),t.ps&&(t.ps.ns=t.ns),t.ns&&(t.ns.ps=t.ps),t.s.ft===t&&(t.s.ft=t.nt),t.s.lt===t&&(t.s.lt=t.pt),t.pt&&(t.pt.nt=t.nt),t.nt&&(t.nt.pt=t.pt),!t.s.ft){var e=t.s;Y(e,"DEACTIVATE"),e.onDeactivate&&e.onDeactivate(e.value);for(var n=e.fs;null!==n;n=n.ns)X(n)}}var K={get:function(){return V(this._state)},subscribe:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._state,r=P;n.freezed||n.ft||(P=1);var i=V(n,!0);if(P=r,n.freezed)return e&&L((function(){return t(i,!0)})),_;var o=G(n,t);++n.subs,e&&L((function(){return t(i,!0)}));var s=function(){o&&(X(o),--n.subs,o=null)},a=N||x;return a&&(a.children?a.children.push(s):a.children=[s]),s},sample:function(){return V(this._state,!0)}};function Q(t,e){var n=N||x,r={value:t,compute:e,nextValue:t,subs:0,i:0,dirty:0,tracking:!1,version:null,node:null,fs:null,ls:null,ft:null,lt:null};return n&&(n.children?n.children.push(r):n.children=[r]),r}var $=Object.assign(Object.assign({},K),{set:function(t){return j(this._state,t)},notify:function(){return j(this._state)}});function J(t,e){var n=Q(t,void 0),r=function(t){return arguments.length?j(n,t):V(n)};return e&&(n.filter=e),r._state=n,r.set=$.set,r.get=$.get,r.notify=$.notify,r.subscribe=$.subscribe,r.sample=$.sample,r}function Z(t){return t._state&&t.get}function tt(t,e,n){var r,i=Q(void 0,Z(r=t)&&r.set?function(){return t()}:t),o=function(){return V(i)};return e&&(i.filter=e),n&&(i.catch=n),o._state=i,o.get=K.get,o.subscribe=K.subscribe,o.sample=K.sample,o}var et={},nt={},rt=1;function it(t){if(function(t){return Array.isArray(t)}(t))return t.slice();if(t&&"object"==typeof t){if(function(t){var e=Object.getPrototypeOf(t);return e&&e.constructor===Object}(t))return Object.assign({},t);throw new O}return t}function ot(t,e,n){var r=nt[t];return void 0!==r?r:it(3===arguments.length?n:e.sample())}function st(){nt={}}function at(t,e){var n;if(2!==arguments.length){n=t;var r,i=this._setter,o=this._id,s=this._key,a=this._parent;if("function"!=typeof n)r=n;else{var u=ot(o,this),c=n(u);if(c===et)return;r=void 0===c?u:c}nt[o]=r,i?i(r):a.update((function(t){if(!t)return et;t[s]=r}))}else ut(this,t,e)}function ut(t,e,n){t.update((function(r){if(!r)return et;var i,o=t._id+"."+e;if("function"!=typeof n)i=n;else{var s=ot(o,void 0,r[e]),a=n(s);i=void 0===a?s:a}nt[o]=i,r[e]=i}))}function ct(t){var e=this,n=this._id+"."+t,r=tt((function(){var n=e(),r=n&&n[t];return void 0===r?null:r}));return r._id=n,r._key=t,r._parent=this,r.select=ct,r.update=at,r}var lt={root:null,isCreating:!1,path:"",setupQueue:[]},ft={path:"",i:0,node:null},ht="F",pt="N",dt="P",vt="B",yt=">",gt="<";function mt(t){var e=ft.path[ft.i],n=ft.path[++ft.i]===yt;switch(e){case ht:ft.node=ft.node.firstChild;break;case"N":ft.node=ft.node.nextSibling;break;case dt:ft.node=ft.node.parentNode,mt(t)}n&&t&&(++ft.i,t())}function bt(t,e,n){(n||e.parentNode).insertBefore(t,e)}function kt(t,e,n){for(var r=n||t.parentNode,i=t,o=null;i&&i!==e;)o=i.nextSibling,r.removeChild(i),i=o}function wt(){return document.createTextNode("")}function _t(t,e,n){n.subscribe((function(n){return t[e]=n}))}function Et(t,e,n){if("function"==typeof n)return function(t,e,n){n.subscribe((function(n){return Rt(t,e,n)}))}(t,e,Z(n)?n:tt(n)),!0;lt.isCreating&&Rt(t,e,n)}function Rt(t,e,n){if(!0===n||""===n)n="";else if(!n)return void t.removeAttribute(e);t.setAttribute(e,n)}function At(t){!function(t){if(lt.isCreating){var e=wt();return lt.path+="FBP",lt.root.appendChild(e),void t(e)}mt(),t(ft&&ft.node),mt()}((function(e){lt.isCreating?lt.setupQueue.push((function(){return Ct(t,e)})):Ct(t,e)}))}function Ct(t,e){if(e&&t)return"function"==typeof t?Z(t)?void Ot(t,e):void Ot(tt(t),e):void bt(t,e)}function Ot(t,e){var n=e.previousSibling;n||bt(n=wt(),e),t.subscribe((function(t){kt(n.nextSibling,e),t&&bt(t,e)}))}function Nt(t){var e=null,n="";return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];if(!e){var s=lt.setupQueue;lt.setupQueue=[];var a=Tt(t,i);n=a.pathString,e=a.rootNode.cloneNode(!0);var u=!0,c=!1,l=void 0;try{for(var f,h=lt.setupQueue[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value;p()}}catch(t){c=!0,l=t}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}return lt.setupQueue=s,a.rootNode}var d=e.cloneNode(!0);return St(t,i,d,n),d}}function xt(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return At(t.apply(void 0,o(n)))}}function St(t,e,n,r){var i=lt.isCreating,o=ft.path,s=ft.i,a=ft.node;lt.isCreating=!1,ft.path=r,ft.i=0,ft.node=n,L(t,e),lt.isCreating=i,ft.path=o,ft.i=s,ft.node=a}function Tt(t,e){var n=lt.path;lt.path="";var r=lt.root,i=document.createDocumentFragment();lt.root=i;var o=lt.isCreating;lt.isCreating=!0,L(t,e);var s,a=function(t){t=t.replace(Pt,pt);var e="";for(;e!==t;)e=t,t=t.replace(Mt,"");return t=t.replace(Bt,"").replace(It,"").replace(Lt,dt)}(lt.path);return lt.isCreating=o,lt.path=n,lt.root=r,1===i.childNodes.length&&(!(s=i.firstChild)||s.nodeType!==Node.TEXT_NODE||s.textContent)&&(i=i.firstChild,a[0]===ht&&(a="_"+a.substring(1))),{rootNode:i,pathString:a}}var Pt=new RegExp("PF","g"),Mt=new RegExp("".concat(yt,"[^").concat(vt).concat(yt).concat(gt,"]*").concat(gt),"g"),It=new RegExp(gt,"g"),Bt=new RegExp("[^".concat(vt,"]+$"),"g"),Lt=new RegExp("".concat(pt,"+").concat(dt),"g");function Dt(t){var e,n="";for(var r in t){var i=t[r];if(i){if("function"==typeof i){e||(e=[]),e.push(r);continue}n&&(n+=" "),n+=r}}return e?function(){var r=n,i=!0,o=!1,s=void 0;try{for(var a,u=e[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var c=a.value;t[c]()&&(r&&(r+=" "),r+=c)}}catch(t){o=!0,s=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}return r}:n||null}function jt(t){for(var e,n="",r=0;r<t.length;r++){var i=t[r];if(i&&("object"==typeof i&&(i=Array.isArray(i)?jt(i):Dt(i)),i)){var o=void 0===i?"undefined":s(i);"function"===o?(e||(e=[]),e.push(i)):"string"===o&&(n&&(n+=" "),n+=i)}}return e?function(){var t=n,r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var u=(0,s.value)();u&&"string"==typeof u&&(t&&(t+=" "),t+=u)}}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return t||null}:n||null}function Ft(t,e){if(t&&(!lt.isCreating||lt.root)){var n,r=!1;if(lt.isCreating)n=lt.root;else{if(ft.path[ft.i]!==vt)return;n=ft.node,mt(e)}for(var i in t){var o=Ut[i],s=t[i];if(o)o(n,s)&&(r=!0);else if(i=zt[i]||i,"function"!=typeof s)lt.isCreating&&(n[i]=s);else{if(r=!0,"o"===i[0]&&"n"===i[1]){n[i]=s;continue}_t(n,i,Z(s)?s:tt(s))}}r&&lt.isCreating&&(lt.path+=vt)}}var Ut={attrs:function(t,e){var n=!1;for(var r in e)n=Et(t,r,e[r])||n;return n},class:function(t,e){return"object"==typeof e&&(e=Array.isArray(e)?jt(e):Dt(e)),Et(t,"class",e)},ref:function(t,e){return e(t),!0}},zt={text:"textContent"},qt={get __INTERNAL__(){return"Dummy property used for correct type checking only"}};function Vt(t,e,n){var r,i,o;switch(arguments.length){case 1:"function"==typeof t?i=t:o=t;break;case 2:o=t,"function"==typeof e?i=e:r=e;break;case 3:o=t,r=e,i=n}if(!o)return i(),qt;if(lt.isCreating){var s=document.createElement(o);return lt.root.appendChild(s),lt.root=s,lt.path+=ht,Ft(r),i&&(lt.path+=yt,i(),lt.path+=gt),lt.path+=dt,lt.root=lt.root.parentNode,qt}return mt(i),Ft(r,i),qt}function Ht(t,e){if(lt.isCreating&&lt.root){var n=wt();return lt.path+="FBP",lt.setupQueue.push((function(){return Wt(t,e,n)})),void lt.root.appendChild(n)}mt(),Wt(t,e,ft.node),mt()}function Wt(t,e,n){if(Z(t)){var r=n.previousSibling;r||bt(r=wt(),n);var i=[],o=new Map,s=new Map,a=tt((function(){var r=t(),a=n.parentNode,u=i.length,c=r.length;if(c||u){for(var l=Math.min(u,c),f=0,h=u-1,p=c-1,d=0;d<l;++d){var v=0;if(i[f]===r[f]?++f:++v,i[h]===r[p]?(--h,--p):++v,2===v)break}if(!(h<0&&p<0))if(f>h){for(var y=p+1,g=y===c?n:o.get(r[y]);f<=p;)bt(Yt(r[f],e,o,s),g,a),++f;i=r.slice()}else if(f>p){var m=h+1;for(kt(o.get(i[f]),m===u?n:o.get(i[m]),a);f<m;){var b=i[f++];s.get(b)(),s.delete(b),o.delete(b)}i=r.slice()}else{var k=[],w=new Map,_=0,E=0,R=!1;u=h+1-f,c=p+1-f;for(var A=0;A<c;++A){var C=f+A;k[A]=-1,w.set(r[C],C)}for(var O=0;O<u;++O){var N=f+O,x=i[N],S=w.get(x);if(void 0!==S)k[S-f]=N,R||(E>S?R=!0:E=S);else{var T=o.get(x);kt(T,(T.$lc||T).nextSibling,a),s.get(x)(),s.delete(x),o.delete(x),_++}}if(R)for(var P=function(t){for(var e=t.length,n=[],r=[],i=0,o=0;o<e;++o){var s=t[o];if(!(s<0)){for(var a=1,u=i+1;a<u;){var c=a+(0|(u-a)/2);t[n[c]]>s?u=c:a=c+1}r[o]=n[a-1],n[a]=o,a>i&&(i=a)}}var l=[],f=i,h=n[i];for(;f;)l[--f]=t[h],h=r[h];return l}(k),M=0,I=P.length-1;M<c;++M){var B=k[c-M-1];if(B!==P[I]){var L=p-M,D=r[L],j=r[L+1],F=void 0===j?n:o.get(j);if(B<0)bt(Yt(D,e,o,s),F,a);else{var U=o.get(D),z=U.$lc;if(z&&U!==z)for(var q=U,V=void 0;V=q.nextSibling,bt(q,F,a),q!==z;)q=V;else bt(U,F,a)}}else--I}else if(u-_!==c)for(var H=0;H<c;++H)if(-1===k[c-H-1]){var W=p-H,Y=r[W],G=r[W+1],X=void 0===G?n:o.get(G);bt(Yt(Y,e,o,s),X,a)}i=r.slice()}}}));return a.subscribe(Gt),u=function(){s.forEach((function(t){return t()})),s.clear(),o.clear()},void(a._state.onDeactivate=u)}var u,c=n.parentNode,l=!0,f=!1,h=void 0;try{for(var p,d=t[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var v=p.value;bt(e(v),n,c)}}catch(t){f=!0,h=t}finally{try{l||null==d.return||d.return()}finally{if(f)throw h}}}function Yt(t,e,n,r){var i,o,s,a,u,c=(o=N,s=x,a=P,P=0,x=u={},N=null,function(){i=e(t)}(),N=o,x=s,P=a,function(){return W(u)}),l=i;if(function(t){return t.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(i)){var f=i.firstChild;l=wt(),f?i.insertBefore(l,f):i.appendChild(l),l.$lc=i.lastChild}return n.set(t,l),r.set(t,c),i}var Gt=function(){},Xt="#play",Kt=J(location.hash),Qt=tt((function(){return Kt().split("/")}));window.addEventListener("hashchange",(function(){Kt(location.hash)}));var $t,Jt,Zt,te,ee,ne,re=tt((function(){var t=Qt()[0];return t===Xt?"PLAY":"#host"===t?"HOST":"MAIN"})),ie=tt((function(){return Qt()[1]}));function oe(t){return location.origin+"/"+"#play/"+t}function se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ae(t,e,n){return e&&se(t.prototype,e),n&&se(t,n),t}function ue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}(Jt=$t||($t={})).RoomUpdate="ROOM_UPDATE",Jt.StartGame="START_GAME",Jt.PlayerData="PLAYER_DATA",(te=Zt||(Zt={})).Host="HOST",te.Player="PLAYER",(ne=ee||(ee={})).Lobby="LOBBY",ne.Question="QUESTION",ne.Vote="VOTE",ne.Results="RESULTS";var ce={};
/*!
 * Socket.IO v4.5.2
 * (c) 2014-2022 Guillermo Rauch
 * Released under the MIT License.
 */ce=function(){"use strict";var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}},n=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)},i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},o=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},s=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},a=function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)},u=function(t){var e=i();return function(){var n,r=j(t);if(e){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}},c=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t},l=function(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}},f=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},h=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=l(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}},p=function(t){if(t)return d(t)},d=function(t){for(var e in p.prototype)t[e]=p.prototype[e];return t},v=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e}),{})},y=function(t,e){e.useNativeTimers?(t.setTimeoutFn=ft.bind(lt),t.clearTimeoutFn=ht.bind(lt)):(t.setTimeoutFn=setTimeout.bind(lt),t.clearTimeoutFn=clearTimeout.bind(lt))},g=function(t){return"string"==typeof t?m(t):Math.ceil((t.byteLength||t.size)*pt)},m=function(t){for(var e=0,n=0,r=0,i=t.length;r<i;r++)(e=t.charCodeAt(r))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n},b=function(t){var e="";do{e=yt[t%gt]+e,t=Math.floor(t/gt)}while(t>0);return e},k=function(){var t=b(+new Date);return t!==ct?(bt=0,ct=t):t+"."+b(bt++)},w=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},_=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e},E=function(t){var e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||_t))return new XMLHttpRequest}catch(t){}if(!e)try{return new(lt[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}},R=function(){},A=function(){for(var t in At.requests)At.requests.hasOwnProperty(t)&&At.requests[t].abort()},C=function(t){var e=t,n=t.indexOf("["),r=t.indexOf("]");-1!=n&&-1!=r&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));for(var i=Mt.exec(t||""),o={},s=14;s--;)o[It[s]]=i[s]||"";return-1!=n&&-1!=r&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=O(o,o.path),o.queryKey=N(o,o.query),o},O=function(t,e){var n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return"/"!=e.substr(0,1)&&0!==e.length||r.splice(0,1),"/"==e.substr(e.length-1,1)&&r.splice(r.length-1,1),r},N=function(t,e){var n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,r){e&&(n[e]=r)})),n},x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==n?n.protocol+"//"+t:"https://"+t),r=C(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r},S=function(t){return Lt&&(t instanceof ArrayBuffer||Dt(t))||Ft&&t instanceof Blob||Ut&&t instanceof File},T=function(t){var e=[],n=t.data,r=t;return r.data=qt(n,e),r.attachments=e.length,{packet:r,buffers:e}},P=function(t,e){return t.data=Vt(t.data,e),t.attachments=void 0,t},M=function(t,e,n){return t.on(e,n),function(){t.off(e,n)}},I=function(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0},B=function(t,e){"object"===L(t)&&(e=t,t=void 0);var n,r=x(t,(e=e||{}).path||"/socket.io"),i=r.source,o=r.id,s=r.path,a=Zt[o]&&s in Zt[o].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||a?n=new Jt(i,e):(Zt[o]||(Zt[o]=new Jt(i,e)),n=Zt[o]),r.query&&!e.query&&(e.query=r.queryKey),n.socket(r.path,e)};function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function D(){return D=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D.apply(this,arguments)}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}function U(t,e,n){return U=i()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&F(i,n.prototype),i},U.apply(null,arguments)}function z(t){var e="function"==typeof Map?new Map:void 0;return z=function(t){if(null===t||!o(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return U(t,arguments,j(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),F(n,t)},z(t)}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=c(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},q.apply(this,arguments)}var V=Object.create(null);V.open="0",V.close="1",V.ping="2",V.pong="3",V.message="4",V.upgrade="5",V.noop="6";var H=Object.create(null);Object.keys(V).forEach((function(t){H[V[t]]=t}));for(var W={type:"error",data:"parser error"},Y="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),G="function"==typeof ArrayBuffer,X=function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer},K=function(t,e,n){var r=t.type,i=t.data;return Y&&i instanceof Blob?e?n(i):Q(i,n):G&&(i instanceof ArrayBuffer||X(i))?e?n(i):Q(new Blob([i]),n):n(V[r]+(i||""))},Q=function(t,e){var n=new FileReader;return n.onload=function(){var t=n.result.split(",")[1];e("b"+t)},n.readAsDataURL(t)},$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",J="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Z=0;Z<$.length;Z++)J[$.charCodeAt(Z)]=Z;var tt=function(t){var e,n,r,i,o,s=.75*t.length,a=t.length,u=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var c=new ArrayBuffer(s),l=new Uint8Array(c);for(e=0;e<a;e+=4)n=J[t.charCodeAt(e)],r=J[t.charCodeAt(e+1)],i=J[t.charCodeAt(e+2)],o=J[t.charCodeAt(e+3)],l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|i>>2,l[u++]=(3&i)<<6|63&o;return c},et="function"==typeof ArrayBuffer,nt=function(t,e){if("string"!=typeof t)return{type:"message",data:it(t,e)};var n=t.charAt(0);return"b"===n?{type:"message",data:rt(t.substring(1),e)}:H[n]?t.length>1?{type:H[n],data:t.substring(1)}:{type:H[n]}:W},rt=function(t,e){if(et){var n=tt(t);return it(n,e)}return{base64:!0,data:t}},it=function(t,e){return"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t},ot=String.fromCharCode(30),st=function(t,e){var n=t.length,r=new Array(n),i=0;t.forEach((function(t,o){K(t,!1,(function(t){r[o]=t,++i===n&&e(r.join(ot))}))}))},at=function(t,e){for(var n=t.split(ot),r=[],i=0;i<n.length;i++){var o=nt(n[i],e);if(r.push(o),"error"===o.type)break}return r},ut=4;p.prototype.on=p.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},p.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},p.prototype.off=p.prototype.removeListener=p.prototype.removeAllListeners=p.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},p.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e)}return this},p.prototype.emitReserved=p.prototype.emit,p.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},p.prototype.hasListeners=function(t){return!!this.listeners(t).length};for(var ct,lt="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),ft=setTimeout,ht=clearTimeout,pt=1.33,dt=function(e){r(o,e);var i=u(o);function o(e,n,r){var s;return t(this,o),(s=i.call(this,e)).description=n,s.context=r,s.type="TransportError",s}return n(o)}(z(Error)),vt=function(e){r(o,e);var i=u(o);function o(e){var n;return t(this,o),(n=i.call(this)).writable=!1,y(s(n),e),n.opts=e,n.query=e.query,n.readyState="",n.socket=e.socket,n}return n(o,[{key:"onError",value:function(t,e,n){return q(j(o.prototype),"emitReserved",this).call(this,"error",new dt(t,e,n)),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(t){"open"===this.readyState&&this.write(t)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,q(j(o.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(t){var e=nt(t,this.socket.binaryType);this.onPacket(e)}},{key:"onPacket",value:function(t){q(j(o.prototype),"emitReserved",this).call(this,"packet",t)}},{key:"onClose",value:function(t){this.readyState="closed",q(j(o.prototype),"emitReserved",this).call(this,"close",t)}}]),o}(p),yt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),gt=64,mt={},bt=0,kt=0;kt<gt;kt++)mt[yt[kt]]=kt;var wt=!1;try{wt="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){}var _t=wt,Et=null!=new E({xdomain:!1}).responseType,Rt=function(e){r(o,e);var i=u(o);function o(e){var n;if(t(this,o),(n=i.call(this,e)).polling=!1,"undefined"!=typeof location){var r="https:"===location.protocol,s=location.port;s||(s=r?"443":"80"),n.xd="undefined"!=typeof location&&e.hostname!==location.hostname||s!==e.port,n.xs=e.secure!==r}var a=e&&e.forceBase64;return n.supportsBinary=Et&&!a,n}return n(o,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(t){var e=this;this.readyState="pausing";var n=function(){e.readyState="paused",t()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",(function(){--r||n()}))),this.writable||(r++,this.once("drain",(function(){--r||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(t){var e=this,n=function(t){if("opening"===e.readyState&&"open"===t.type&&e.onOpen(),"close"===t.type)return e.onClose({description:"transport closed by the server"}),!1;e.onPacket(t)};at(t,this.socket.binaryType).forEach(n),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var t=this,e=function(){t.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}},{key:"write",value:function(t){var e=this;this.writable=!1,st(t,(function(t){e.doWrite(t,(function(){e.writable=!0,e.emitReserved("drain")}))}))}},{key:"uri",value:function(){var t=this.query||{},e=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=k()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var r=w(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D(t,{xd:this.xd,xs:this.xs},this.opts),new At(this.uri(),t)}},{key:"doWrite",value:function(t,e){var n=this,r=this.request({method:"POST",data:t});r.on("success",e),r.on("error",(function(t,e){n.onError("xhr post error",t,e)}))}},{key:"doPoll",value:function(){var t=this,e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(function(e,n){t.onError("xhr poll error",e,n)})),this.pollXhr=e}}]),o}(vt),At=function(e){r(o,e);var i=u(o);function o(e,n){var r;return t(this,o),r=i.call(this),y(s(r),n),r.opts=n,r.method=n.method||"GET",r.uri=e,r.async=!1!==n.async,r.data=void 0!==n.data?n.data:null,r.create(),r}return n(o,[{key:"create",value:function(){var t=this,e=v(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;var n=this.xhr=new E(e);try{n.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var r in n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,this.opts.extraHeaders[r])}catch(t){}if("POST"===this.method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{n.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=function(){4===n.readyState&&(200===n.status||1223===n.status?t.onLoad():t.setTimeoutFn((function(){t.onError("number"==typeof n.status?n.status:0)}),0))},n.send(this.data)}catch(e){return void this.setTimeoutFn((function(){t.onError(e)}),0)}"undefined"!=typeof document&&(this.index=o.requestsCount++,o.requests[this.index]=this)}},{key:"onError",value:function(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=R,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete o.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),o}(p);At.requestsCount=0,At.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",A):"function"==typeof addEventListener&&addEventListener("onpagehide"in lt?"pagehide":"unload",A,!1));var Ct="function"==typeof Promise&&"function"==typeof Promise.resolve?function(t){return Promise.resolve().then(t)}:function(t,e){return e(t,0)},Ot=lt.WebSocket||lt.MozWebSocket,Nt=!0,xt="arraybuffer",St="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),Tt=function(e){r(o,e);var i=u(o);function o(e){var n;return t(this,o),(n=i.call(this,e)).supportsBinary=!e.forceBase64,n}return n(o,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var t=this.uri(),e=this.opts.protocols,n=St?{}:v(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Nt&&!St?e?new Ot(t,e):new Ot(t):new Ot(t,e,n)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType||xt,this.addEventListeners()}}},{key:"addEventListeners",value:function(){var t=this;this.ws.onopen=function(){t.opts.autoUnref&&t.ws._socket.unref(),t.onOpen()},this.ws.onclose=function(e){return t.onClose({description:"websocket connection closed",context:e})},this.ws.onmessage=function(e){return t.onData(e.data)},this.ws.onerror=function(e){return t.onError("websocket error",e)}}},{key:"write",value:function(t){var e=this;this.writable=!1;for(var n=function(n){var r=t[n],i=n===t.length-1;K(r,e.supportsBinary,(function(t){try{Nt&&e.ws.send(t)}catch(t){}i&&Ct((function(){e.writable=!0,e.emitReserved("drain")}),e.setTimeoutFn)}))},r=0;r<t.length;r++)n(r)}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var t=this.query||{},e=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=k()),this.supportsBinary||(t.b64=1);var r=w(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"check",value:function(){return!!Ot}}]),o}(vt),Pt={websocket:Tt,polling:Rt},Mt=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,It=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Bt=function(e){r(o,e);var i=u(o);function o(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(this,o),n=i.call(this),e&&"object"===L(e)&&(r=e,e=null),e?(e=C(e),r.hostname=e.host,r.secure="https"===e.protocol||"wss"===e.protocol,r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=C(r.host).host),y(s(n),r),n.secure=null!=r.secure?r.secure:"undefined"!=typeof location&&"https:"===location.protocol,r.hostname&&!r.port&&(r.port=n.secure?"443":"80"),n.hostname=r.hostname||("undefined"!=typeof location?location.hostname:"localhost"),n.port=r.port||("undefined"!=typeof location&&location.port?location.port:n.secure?"443":"80"),n.transports=r.transports||["polling","websocket"],n.readyState="",n.writeBuffer=[],n.prevBufferLen=0,n.opts=D({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),n.opts.path=n.opts.path.replace(/\/$/,"")+"/","string"==typeof n.opts.query&&(n.opts.query=_(n.opts.query)),n.id=null,n.upgrades=null,n.pingInterval=null,n.pingTimeout=null,n.pingTimeoutTimer=null,"function"==typeof addEventListener&&(n.opts.closeOnBeforeunload&&addEventListener("beforeunload",(function(){n.transport&&(n.transport.removeAllListeners(),n.transport.close())}),!1),"localhost"!==n.hostname&&(n.offlineEventListener=function(){n.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",n.offlineEventListener,!1))),n.open(),n}return n(o,[{key:"createTransport",value:function(t){var e=D({},this.opts.query);e.EIO=ut,e.transport=t,this.id&&(e.sid=this.id);var n=D({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Pt[t](n)}},{key:"open",value:function(){var t,e=this;if(this.opts.rememberUpgrade&&o.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){e.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}},{key:"setTransport",value:function(t){var e=this;this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(t){return e.onClose("transport close",t)}))}},{key:"probe",value:function(t){var e=function(){u||(u=!0,f(),a.close(),a=null)},n=function(){l("transport closed")},r=function(){l("socket closed")},i=function(t){a&&t.name!==a.name&&e()},s=this,a=this.createTransport(t),u=!1;o.priorWebsocketSuccess=!1;var c=function(){u||(a.send([{type:"ping",data:"probe"}]),a.once("packet",(function(t){if(!u)if("pong"===t.type&&"probe"===t.data){if(s.upgrading=!0,s.emitReserved("upgrading",a),!a)return;o.priorWebsocketSuccess="websocket"===a.name,s.transport.pause((function(){u||"closed"!==s.readyState&&(f(),s.setTransport(a),a.send([{type:"upgrade"}]),s.emitReserved("upgrade",a),a=null,s.upgrading=!1,s.flush())}))}else{var e=new Error("probe error");e.transport=a.name,s.emitReserved("upgradeError",e)}})))},l=function(t){var n=new Error("probe error: "+t);n.transport=a.name,e(),s.emitReserved("upgradeError",n)},f=function(){a.removeListener("open",c),a.removeListener("error",l),a.removeListener("close",n),s.off("close",r),s.off("upgrading",i)};a.once("open",c),a.once("error",l),a.once("close",n),this.once("close",r),this.once("upgrading",i),a.open()}},{key:"onOpen",value:function(){if(this.readyState="open",o.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},{key:"onPacket",value:function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}},{key:"onHandshake",value:function(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var t=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){t.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var t=1,e=0;e<this.writeBuffer.length;e++){var n=this.writeBuffer[e].data;if(n&&(t+=g(n)),e>0&&t>this.maxPayload)return this.writeBuffer.slice(0,e);t+=2}return this.writeBuffer}},{key:"write",value:function(t,e,n){return this.sendPacket("message",t,e,n),this}},{key:"send",value:function(t,e,n){return this.sendPacket("message",t,e,n),this}},{key:"sendPacket",value:function(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:t,data:e,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var t=this,e=function(){t.onClose("forced close"),t.transport.close()},n=function n(){t.off("upgrade",n),t.off("upgradeError",n),e()},r=function(){t.once("upgrade",n),t.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){t.upgrading?r():e()})):this.upgrading?r():e()),this}},{key:"onError",value:function(t){o.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}},{key:"onClose",value:function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}]),o}(p);Bt.protocol=ut,Bt.protocol;var Lt="function"==typeof ArrayBuffer,Dt=function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer},jt=Object.prototype.toString,Ft="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===jt.call(Blob),Ut="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===jt.call(File);function zt(t,e){if(!t||"object"!==L(t))return!1;if(Array.isArray(t)){for(var n=0,r=t.length;n<r;n++)if(zt(t[n]))return!0;return!1}if(S(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return zt(t.toJSON(),!0);for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&zt(t[i]))return!0;return!1}function qt(t,e){if(!t)return t;if(S(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){for(var r=new Array(t.length),i=0;i<t.length;i++)r[i]=qt(t[i],e);return r}if("object"===L(t)&&!(t instanceof Date)){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(o[s]=qt(t[s],e));return o}return t}function Vt(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=Vt(t[n],e);else if("object"===L(t))for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Vt(t[r],e));return t}var Ht,Wt=5;!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(Ht||(Ht={}));var Yt=function(){function e(n){t(this,e),this.replacer=n}return n(e,[{key:"encode",value:function(t){return t.type!==Ht.EVENT&&t.type!==Ht.ACK||!zt(t)?[this.encodeAsString(t)]:(t.type=t.type===Ht.EVENT?Ht.BINARY_EVENT:Ht.BINARY_ACK,this.encodeAsBinary(t))}},{key:"encodeAsString",value:function(t){var e=""+t.type;return t.type!==Ht.BINARY_EVENT&&t.type!==Ht.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}},{key:"encodeAsBinary",value:function(t){var e=T(t),n=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(n),r}}]),e}(),Gt=function(e){r(o,e);var i=u(o);function o(e){var n;return t(this,o),(n=i.call(this)).reviver=e,n}return n(o,[{key:"add",value:function(t){var e;if("string"==typeof t)(e=this.decodeString(t)).type===Ht.BINARY_EVENT||e.type===Ht.BINARY_ACK?(this.reconstructor=new Xt(e),0===e.attachments&&q(j(o.prototype),"emitReserved",this).call(this,"decoded",e)):q(j(o.prototype),"emitReserved",this).call(this,"decoded",e);else{if(!S(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,q(j(o.prototype),"emitReserved",this).call(this,"decoded",e))}}},{key:"decodeString",value:function(t){var e=0,n={type:Number(t.charAt(0))};if(void 0===Ht[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Ht.BINARY_EVENT||n.type===Ht.BINARY_ACK){for(var r=e+1;"-"!==t.charAt(++e)&&e!=t.length;);var i=t.substring(r,e);if(i!=Number(i)||"-"!==t.charAt(e))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===t.charAt(e+1)){for(var s=e+1;++e&&","!==t.charAt(e)&&e!==t.length;);n.nsp=t.substring(s,e)}else n.nsp="/";var a=t.charAt(e+1);if(""!==a&&Number(a)==a){for(var u=e+1;++e;){var c=t.charAt(e);if(null==c||Number(c)!=c){--e;break}if(e===t.length)break}n.id=Number(t.substring(u,e+1))}if(t.charAt(++e)){var l=this.tryParse(t.substr(e));if(!o.isPayloadValid(n.type,l))throw new Error("invalid payload");n.data=l}return n}},{key:"tryParse",value:function(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(t,e){switch(t){case Ht.CONNECT:return"object"===L(e);case Ht.DISCONNECT:return void 0===e;case Ht.CONNECT_ERROR:return"string"==typeof e||"object"===L(e);case Ht.EVENT:case Ht.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case Ht.ACK:case Ht.BINARY_ACK:return Array.isArray(e)}}}]),o}(p),Xt=function(){function e(n){t(this,e),this.packet=n,this.buffers=[],this.reconPack=n}return n(e,[{key:"takeBinaryData",value:function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=P(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}(),Kt=Object.freeze({__proto__:null,protocol:Wt,get PacketType(){return Ht},Encoder:Yt,Decoder:Gt}),Qt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),$t=function(e){r(o,e);var i=u(o);function o(e,n,r){var s;return t(this,o),(s=i.call(this)).connected=!1,s.receiveBuffer=[],s.sendBuffer=[],s.ids=0,s.acks={},s.flags={},s.io=e,s.nsp=n,r&&r.auth&&(s.auth=r.auth),s.io._autoConnect&&s.open(),s}return n(o,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var t=this.io;this.subs=[M(t,"open",this.onopen.bind(this)),M(t,"packet",this.onpacket.bind(this)),M(t,"error",this.onerror.bind(this)),M(t,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.unshift("message"),this.emit.apply(this,e),this}},{key:"emit",value:function(t){if(Qt.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.unshift(t);var i={type:Ht.EVENT,data:n,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]){var o=this.ids++,s=n.pop();this._registerAckCallback(o,s),i.id=o}var a=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!a||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}},{key:"_registerAckCallback",value:function(t,e){var n=this,r=this.flags.timeout;if(void 0!==r){var i=this.io.setTimeoutFn((function(){delete n.acks[t];for(var r=0;r<n.sendBuffer.length;r++)n.sendBuffer[r].id===t&&n.sendBuffer.splice(r,1);e.call(n,new Error("operation has timed out"))}),r);this.acks[t]=function(){n.io.clearTimeoutFn(i);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];e.apply(n,[null].concat(r))}}else this.acks[t]=e}},{key:"packet",value:function(t){t.nsp=this.nsp,this.io._packet(t)}},{key:"onopen",value:function(){var t=this;"function"==typeof this.auth?this.auth((function(e){t.packet({type:Ht.CONNECT,data:e})})):this.packet({type:Ht.CONNECT,data:this.auth})}},{key:"onerror",value:function(t){this.connected||this.emitReserved("connect_error",t)}},{key:"onclose",value:function(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}},{key:"onpacket",value:function(t){if(t.nsp===this.nsp)switch(t.type){case Ht.CONNECT:if(t.data&&t.data.sid){var e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ht.EVENT:case Ht.BINARY_EVENT:this.onevent(t);break;case Ht.ACK:case Ht.BINARY_ACK:this.onack(t);break;case Ht.DISCONNECT:this.ondisconnect();break;case Ht.CONNECT_ERROR:this.destroy();var n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(t){var e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}},{key:"emitEvent",value:function(t){if(this._anyListeners&&this._anyListeners.length){var e,n=this._anyListeners.slice(),r=h(n);try{for(r.s();!(e=r.n()).done;)e.value.apply(this,t)}catch(t){r.e(t)}finally{r.f()}}q(j(o.prototype),"emit",this).apply(this,t)}},{key:"ack",value:function(t){var e=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];e.packet({type:Ht.ACK,id:t,data:i})}}}},{key:"onack",value:function(t){var e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}},{key:"onconnect",value:function(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var t=this;this.receiveBuffer.forEach((function(e){return t.emitEvent(e)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(e){t.notifyOutgoingListeners(e),t.packet(e)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(t){return t()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:Ht.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(t){return this.flags.compress=t,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(t){return this.flags.timeout=t,this}},{key:"onAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}},{key:"prependAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}},{key:"offAny",value:function(t){if(!this._anyListeners)return this;if(t){for(var e=this._anyListeners,n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}},{key:"prependAnyOutgoing",value:function(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}},{key:"offAnyOutgoing",value:function(t){if(!this._anyOutgoingListeners)return this;if(t){for(var e=this._anyOutgoingListeners,n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var e,n=this._anyOutgoingListeners.slice(),r=h(n);try{for(r.s();!(e=r.n()).done;)e.value.apply(this,t.data)}catch(t){r.e(t)}finally{r.f()}}}}]),o}(p);I.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},I.prototype.reset=function(){this.attempts=0},I.prototype.setMin=function(t){this.ms=t},I.prototype.setMax=function(t){this.max=t},I.prototype.setJitter=function(t){this.jitter=t};var Jt=function(e){r(o,e);var i=u(o);function o(e,n){var r,a;t(this,o),(r=i.call(this)).nsps={},r.subs=[],e&&"object"===L(e)&&(n=e,e=void 0),(n=n||{}).path=n.path||"/socket.io",r.opts=n,y(s(r),n),r.reconnection(!1!==n.reconnection),r.reconnectionAttempts(n.reconnectionAttempts||1/0),r.reconnectionDelay(n.reconnectionDelay||1e3),r.reconnectionDelayMax(n.reconnectionDelayMax||5e3),r.randomizationFactor(null!==(a=n.randomizationFactor)&&void 0!==a?a:.5),r.backoff=new I({min:r.reconnectionDelay(),max:r.reconnectionDelayMax(),jitter:r.randomizationFactor()}),r.timeout(null==n.timeout?2e4:n.timeout),r._readyState="closed",r.uri=e;var u=n.parser||Kt;return r.encoder=new u.Encoder,r.decoder=new u.Decoder,r._autoConnect=!1!==n.autoConnect,r._autoConnect&&r.open(),r}return n(o,[{key:"reconnection",value:function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}},{key:"reconnectionAttempts",value:function(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}},{key:"reconnectionDelay",value:function(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}},{key:"randomizationFactor",value:function(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}},{key:"reconnectionDelayMax",value:function(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}},{key:"timeout",value:function(t){return arguments.length?(this._timeout=t,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(t){var e=this;if(~this._readyState.indexOf("open"))return this;this.engine=new Bt(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var i=M(n,"open",(function(){r.onopen(),t&&t()})),o=M(n,"error",(function(n){r.cleanup(),r._readyState="closed",e.emitReserved("error",n),t?t(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var s=this._timeout;0===s&&i();var a=this.setTimeoutFn((function(){i(),n.close(),n.emit("error",new Error("timeout"))}),s);this.opts.autoUnref&&a.unref(),this.subs.push((function(){clearTimeout(a)}))}return this.subs.push(i),this.subs.push(o),this}},{key:"connect",value:function(t){return this.open(t)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var t=this.engine;this.subs.push(M(t,"ping",this.onping.bind(this)),M(t,"data",this.ondata.bind(this)),M(t,"error",this.onerror.bind(this)),M(t,"close",this.onclose.bind(this)),M(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(t){try{this.decoder.add(t)}catch(t){this.onclose("parse error")}}},{key:"ondecoded",value:function(t){this.emitReserved("packet",t)}},{key:"onerror",value:function(t){this.emitReserved("error",t)}},{key:"socket",value:function(t,e){var n=this.nsps[t];return n||(n=new $t(this,t,e),this.nsps[t]=n),n}},{key:"_destroy",value:function(t){for(var e=0,n=Object.keys(this.nsps);e<n.length;e++){var r=n[e];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(t){for(var e=this.encoder.encode(t),n=0;n<e.length;n++)this.engine.write(e[n],t.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(t){return t()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var t=this;if(this._reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn((function(){e.skipReconnect||(t.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((function(n){n?(e._reconnecting=!1,e.reconnect(),t.emitReserved("reconnect_error",n)):e.onreconnect()})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}]),o}(p),Zt={};return D(B,{Manager:Jt,Socket:$t,io:B,connect:B}),B}();var le,fe,he,pe,de,ve="http://localhost:1234"===location.origin?"ws://localhost:3000":"",ye=function(){"use strict";function t(e,n,r,i){var o,s,u,c,l=this;a(this,t),ue(this,"_pending",J(!1)),ue(this,"pending",tt(this._pending)),ue(this,"_state",(s="store"+rt++,u=J({loading:!0}),(c=tt(u))._setter=u,c._id=s,c.select=ct,c.update=at,o=st,u._state.onUpdate=o,c)),ue(this,"state",tt(this._state)),ue(this,"roomId",tt((function(){return l.state().id}))),ue(this,"playLink",tt((function(){return oe(l.roomId())}))),ue(this,"loading",tt((function(){return l.state().loading||!1}))),ue(this,"stage",tt((function(){return l.state().stage}))),ue(this,"error",tt((function(){return l.state().error}))),ue(this,"votedAnswer",tt((function(){var t=l.state();return t.answers[t.answerIndex]}))),ue(this,"votedCard",tt((function(){return l.votedAnswer().card}))),ue(this,"votes",tt((function(){return l.votedAnswer().votes}))),ue(this,"playersList",tt((function(){var t=l.state().players;return Object.keys(t).map((function(e){return t[e]}))}))),ue(this,"sortedPlayerList",tt((function(){var t=l.playersList().slice();return t.sort((function(t,e){return t.score-e.score})),t}))),this.socket=(0,ce.io)(ve,{reconnectionDelayMax:1e4,query:{type:e,roomId:n,playerId:r,playerName:i}}),this.playerId=r||"",this.socket.on($t.RoomUpdate,(function(t){l._state.update(t),l._pending(!1)}))}return ae(t,[{key:"emit",value:function(t,e){this._pending(!0),this.socket.emit(t,e)}}]),t}(),ge=function(t){"use strict";l(n,t);var e=w(n);function n(t){var r;return a(this,n),ue(b(r=e.call(this,Zt.Host,t)),"gameStartBlocked",tt((function(){return r.playersList().length<=1}))),ue(b(r),"caption",tt((function(){return r.state().caption}))),ue(b(r),"round",tt((function(){return r.state().round}))),r}return ae(n,[{key:"startGame",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.state();e&&e.stage===ee.Lobby&&this.emit($t.StartGame,t)}}]),n}(ye);le="hD0OlW_col",function(t){var e=function(t,e,n){if(e<0||e>31||t>>>e!=0)throw new RangeError("Value out of range");for(var r=e-1;r>=0;r--)n.push(t>>>r&1)},n=function(t,e){return 0!=(t>>>e&1)},r=function(t){if(!t)throw new Error("Assertion error")},i=function(){function t(e,n,i,o){if(a(this,t),this.version=e,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(o<-1||o>7)throw new RangeError("Mask value out of range");this.size=4*e+17;for(var s=[],u=0;u<this.size;u++)s.push(!1);for(var c=0;c<this.size;c++)this.modules.push(s.slice()),this.isFunction.push(s.slice());this.drawFunctionPatterns();var l=this.addEccAndInterleave(i);if(this.drawCodewords(l),-1==o)for(var f=1e9,h=0;h<8;h++){this.applyMask(h),this.drawFormatBits(h);var p=this.getPenaltyScore();p<f&&(o=h,f=p),this.applyMask(h)}r(0<=o&&o<=7),this.mask=o,this.applyMask(o),this.drawFormatBits(o),this.isFunction=[]}return ae(t,[{key:"getModule",value:function(t,e){return 0<=t&&t<this.size&&0<=e&&e<this.size&&this.modules[e][t]}},{key:"drawFunctionPatterns",value:function(){for(var t=0;t<this.size;t++)this.setFunctionModule(6,t,t%2==0),this.setFunctionModule(t,6,t%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var e=this.getAlignmentPatternPositions(),n=e.length,r=0;r<n;r++)for(var i=0;i<n;i++)0==r&&0==i||0==r&&i==n-1||r==n-1&&0==i||this.drawAlignmentPattern(e[r],e[i]);this.drawFormatBits(0),this.drawVersion()}},{key:"drawFormatBits",value:function(t){for(var e=this.errorCorrectionLevel.formatBits<<3|t,i=e,o=0;o<10;o++)i=i<<1^1335*(i>>>9);var s=21522^(e<<10|i);r(s>>>15==0);for(var a=0;a<=5;a++)this.setFunctionModule(8,a,n(s,a));this.setFunctionModule(8,7,n(s,6)),this.setFunctionModule(8,8,n(s,7)),this.setFunctionModule(7,8,n(s,8));for(var u=9;u<15;u++)this.setFunctionModule(14-u,8,n(s,u));for(var c=0;c<8;c++)this.setFunctionModule(this.size-1-c,8,n(s,c));for(var l=8;l<15;l++)this.setFunctionModule(8,this.size-15+l,n(s,l));this.setFunctionModule(8,this.size-8,!0)}},{key:"drawVersion",value:function(){if(!(this.version<7)){for(var t=this.version,e=0;e<12;e++)t=t<<1^7973*(t>>>11);var i=this.version<<12|t;r(i>>>18==0);for(var o=0;o<18;o++){var s=n(i,o),a=this.size-11+o%3,u=Math.floor(o/3);this.setFunctionModule(a,u,s),this.setFunctionModule(u,a,s)}}}},{key:"drawFinderPattern",value:function(t,e){for(var n=-4;n<=4;n++)for(var r=-4;r<=4;r++){var i=Math.max(Math.abs(r),Math.abs(n)),o=t+r,s=e+n;0<=o&&o<this.size&&0<=s&&s<this.size&&this.setFunctionModule(o,s,2!=i&&4!=i)}}},{key:"drawAlignmentPattern",value:function(t,e){for(var n=-2;n<=2;n++)for(var r=-2;r<=2;r++)this.setFunctionModule(t+r,e+n,1!=Math.max(Math.abs(r),Math.abs(n)))}},{key:"setFunctionModule",value:function(t,e,n){this.modules[e][t]=n,this.isFunction[e][t]=!0}},{key:"addEccAndInterleave",value:function(e){var n=function(t){f.forEach((function(e,n){(t!=l-a||n>=c)&&g.push(e[t])}))},i=this.version,o=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(i,o))throw new RangeError("Invalid argument");for(var s=t.NUM_ERROR_CORRECTION_BLOCKS[o.ordinal][i],a=t.ECC_CODEWORDS_PER_BLOCK[o.ordinal][i],u=Math.floor(t.getNumRawDataModules(i)/8),c=s-u%s,l=Math.floor(u/s),f=[],h=t.reedSolomonComputeDivisor(a),p=0,d=0;p<s;p++){var v=e.slice(d,d+l-a+(p<c?0:1));d+=v.length;var y=t.reedSolomonComputeRemainder(v,h);p<c&&v.push(0),f.push(v.concat(y))}for(var g=[],m=0;m<f[0].length;m++)n(m);return r(g.length==u),g}},{key:"drawCodewords",value:function(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var i=0,o=this.size-1;o>=1;o-=2){6==o&&(o=5);for(var s=0;s<this.size;s++)for(var a=0;a<2;a++){var u=o-a,c=0==(o+1&2)?this.size-1-s:s;!this.isFunction[c][u]&&i<8*e.length&&(this.modules[c][u]=n(e[i>>>3],7-(7&i)),i++)}}r(i==8*e.length)}},{key:"applyMask",value:function(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(var e=0;e<this.size;e++)for(var n=0;n<this.size;n++){var r=void 0;switch(t){case 0:r=(n+e)%2==0;break;case 1:r=e%2==0;break;case 2:r=n%3==0;break;case 3:r=(n+e)%3==0;break;case 4:r=(Math.floor(n/3)+Math.floor(e/2))%2==0;break;case 5:r=n*e%2+n*e%3==0;break;case 6:r=(n*e%2+n*e%3)%2==0;break;case 7:r=((n+e)%2+n*e%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[e][n]&&r&&(this.modules[e][n]=!this.modules[e][n])}}},{key:"getPenaltyScore",value:function(){for(var e=0,n=0;n<this.size;n++){for(var i=!1,o=0,s=[0,0,0,0,0,0,0],a=0;a<this.size;a++)this.modules[n][a]==i?5==++o?e+=t.PENALTY_N1:o>5&&e++:(this.finderPenaltyAddHistory(o,s),i||(e+=this.finderPenaltyCountPatterns(s)*t.PENALTY_N3),i=this.modules[n][a],o=1);e+=this.finderPenaltyTerminateAndCount(i,o,s)*t.PENALTY_N3}for(var u=0;u<this.size;u++){for(var c=!1,l=0,f=[0,0,0,0,0,0,0],h=0;h<this.size;h++)this.modules[h][u]==c?5==++l?e+=t.PENALTY_N1:l>5&&e++:(this.finderPenaltyAddHistory(l,f),c||(e+=this.finderPenaltyCountPatterns(f)*t.PENALTY_N3),c=this.modules[h][u],l=1);e+=this.finderPenaltyTerminateAndCount(c,l,f)*t.PENALTY_N3}for(var p=0;p<this.size-1;p++)for(var d=0;d<this.size-1;d++){var v=this.modules[p][d];v==this.modules[p][d+1]&&v==this.modules[p+1][d]&&v==this.modules[p+1][d+1]&&(e+=t.PENALTY_N2)}var y=0,g=!0,m=!1,b=void 0;try{for(var k,w=this.modules[Symbol.iterator]();!(g=(k=w.next()).done);g=!0){y=k.value.reduce((function(t,e){return t+(e?1:0)}),y)}}catch(t){m=!0,b=t}finally{try{g||null==w.return||w.return()}finally{if(m)throw b}}var _=this.size*this.size,E=Math.ceil(Math.abs(20*y-10*_)/_)-1;return r(0<=E&&E<=9),e+=E*t.PENALTY_N4,r(0<=e&&e<=2568888),e}},{key:"getAlignmentPatternPositions",value:function(){if(1==this.version)return[];for(var t=Math.floor(this.version/7)+2,e=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*t-2)),n=[6],r=this.size-7;n.length<t;r-=e)n.splice(1,0,r);return n}},{key:"finderPenaltyCountPatterns",value:function(t){var e=t[1];r(e<=3*this.size);var n=e>0&&t[2]==e&&t[3]==3*e&&t[4]==e&&t[5]==e;return(n&&t[0]>=4*e&&t[6]>=e?1:0)+(n&&t[6]>=4*e&&t[0]>=e?1:0)}},{key:"finderPenaltyTerminateAndCount",value:function(t,e,n){return t&&(this.finderPenaltyAddHistory(e,n),e=0),e+=this.size,this.finderPenaltyAddHistory(e,n),this.finderPenaltyCountPatterns(n)}},{key:"finderPenaltyAddHistory",value:function(t,e){0==e[0]&&(t+=this.size),e.pop(),e.unshift(t)}}],[{key:"encodeText",value:function(e,n){var r=fe.QrSegment.makeSegments(e);return t.encodeSegments(r,n)}},{key:"encodeBinary",value:function(e,n){var r=fe.QrSegment.makeBytes(e);return t.encodeSegments([r],n)}},{key:"encodeSegments",value:function(n,i){var s,a,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,f=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(t.MIN_VERSION<=u&&u<=c&&c<=t.MAX_VERSION)||l<-1||l>7)throw new RangeError("Invalid value");for(s=u;;s++){var h=8*t.getNumDataCodewords(s,i),p=o.getTotalBits(n,s);if(p<=h){a=p;break}if(s>=c)throw new RangeError("Data too long")}for(var d=0,v=[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH];d<v.length;d++){var y=v[d];f&&a<=8*t.getNumDataCodewords(s,y)&&(i=y)}var g=[],m=!0,b=!1,k=void 0;try{for(var w,_=n[Symbol.iterator]();!(m=(w=_.next()).done);m=!0){var E=w.value;e(E.mode.modeBits,4,g),e(E.numChars,E.mode.numCharCountBits(s),g);var R=!0,A=!1,C=void 0;try{for(var O,N=E.getData()[Symbol.iterator]();!(R=(O=N.next()).done);R=!0){var x=O.value;g.push(x)}}catch(t){A=!0,C=t}finally{try{R||null==N.return||N.return()}finally{if(A)throw C}}}}catch(t){b=!0,k=t}finally{try{m||null==_.return||_.return()}finally{if(b)throw k}}r(g.length==a);var S=8*t.getNumDataCodewords(s,i);r(g.length<=S),e(0,Math.min(4,S-g.length),g),e(0,(8-g.length%8)%8,g),r(g.length%8==0);for(var T=236;g.length<S;T^=253)e(T,8,g);for(var P=[];8*P.length<g.length;)P.push(0);return g.forEach((function(t,e){return P[e>>>3]|=t<<7-(7&e)})),new t(s,i,P,l)}},{key:"getNumRawDataModules",value:function(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");var n=(16*e+128)*e+64;if(e>=2){var i=Math.floor(e/7)+2;n-=(25*i-10)*i-55,e>=7&&(n-=36)}return r(208<=n&&n<=29648),n}},{key:"getNumDataCodewords",value:function(e,n){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][e]}},{key:"reedSolomonComputeDivisor",value:function(e){if(e<1||e>255)throw new RangeError("Degree out of range");for(var n=[],r=0;r<e-1;r++)n.push(0);n.push(1);for(var i=1,o=0;o<e;o++){for(var s=0;s<n.length;s++)n[s]=t.reedSolomonMultiply(n[s],i),s+1<n.length&&(n[s]^=n[s+1]);i=t.reedSolomonMultiply(i,2)}return n}},{key:"reedSolomonComputeRemainder",value:function(e,n){var r=n.map((function(t){return 0})),i=!0,o=!1,s=void 0;try{for(var a,u=function(e,i){var o=i.value^r.shift();r.push(0),n.forEach((function(e,n){return r[n]^=t.reedSolomonMultiply(e,o)}))},c=e[Symbol.iterator]();!(i=(a=c.next()).done);i=!0)u(0,a)}catch(t){o=!0,s=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw s}}return r}},{key:"reedSolomonMultiply",value:function(t,e){if(t>>>8!=0||e>>>8!=0)throw new RangeError("Byte out of range");for(var n=0,i=7;i>=0;i--)n=n<<1^285*(n>>>7),n^=(e>>>i&1)*t;return r(n>>>8==0),n}}]),t}();ue(i,"MIN_VERSION",1),ue(i,"MAX_VERSION",40),ue(i,"PENALTY_N1",3),ue(i,"PENALTY_N2",3),ue(i,"PENALTY_N3",40),ue(i,"PENALTY_N4",10),ue(i,"ECC_CODEWORDS_PER_BLOCK",[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]]),ue(i,"NUM_ERROR_CORRECTION_BLOCKS",[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]]),t.QrCode=i;var o=function(){function t(e,n,r){if(a(this,t),this.mode=e,this.numChars=n,this.bitData=r,n<0)throw new RangeError("Invalid argument");this.bitData=r.slice()}return ae(t,[{key:"getData",value:function(){return this.bitData.slice()}}],[{key:"makeBytes",value:function(n){var r=[],i=!0,o=!1,s=void 0;try{for(var a,u=n[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var c=a.value;e(c,8,r)}}catch(t){o=!0,s=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}return new t(t.Mode.BYTE,n.length,r)}},{key:"makeNumeric",value:function(n){if(!t.isNumeric(n))throw new RangeError("String contains non-numeric characters");for(var r=[],i=0;i<n.length;){var o=Math.min(n.length-i,3);e(parseInt(n.substring(i,i+o),10),3*o+1,r),i+=o}return new t(t.Mode.NUMERIC,n.length,r)}},{key:"makeAlphanumeric",value:function(n){if(!t.isAlphanumeric(n))throw new RangeError("String contains unencodable characters in alphanumeric mode");var r,i=[];for(r=0;r+2<=n.length;r+=2){var o=45*t.ALPHANUMERIC_CHARSET.indexOf(n.charAt(r));o+=t.ALPHANUMERIC_CHARSET.indexOf(n.charAt(r+1)),e(o,11,i)}return r<n.length&&e(t.ALPHANUMERIC_CHARSET.indexOf(n.charAt(r)),6,i),new t(t.Mode.ALPHANUMERIC,n.length,i)}},{key:"makeSegments",value:function(e){return""==e?[]:t.isNumeric(e)?[t.makeNumeric(e)]:t.isAlphanumeric(e)?[t.makeAlphanumeric(e)]:[t.makeBytes(t.toUtf8ByteArray(e))]}},{key:"makeEci",value:function(n){var r=[];if(n<0)throw new RangeError("ECI assignment value out of range");if(n<128)e(n,8,r);else if(n<16384)e(2,2,r),e(n,14,r);else{if(!(n<1e6))throw new RangeError("ECI assignment value out of range");e(6,3,r),e(n,21,r)}return new t(t.Mode.ECI,0,r)}},{key:"isNumeric",value:function(e){return t.NUMERIC_REGEX.test(e)}},{key:"isAlphanumeric",value:function(e){return t.ALPHANUMERIC_REGEX.test(e)}},{key:"getTotalBits",value:function(t,e){var n=0,r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var u=s.value,c=u.mode.numCharCountBits(e);if(u.numChars>=1<<c)return 1/0;n+=4+c+u.bitData.length}}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}},{key:"toUtf8ByteArray",value:function(t){t=encodeURI(t);for(var e=[],n=0;n<t.length;n++)"%"!=t.charAt(n)?e.push(t.charCodeAt(n)):(e.push(parseInt(t.substring(n+1,n+3),16)),n+=2);return e}}]),t}();ue(o,"NUMERIC_REGEX",/^[0-9]*$/),ue(o,"ALPHANUMERIC_REGEX",/^[A-Z0-9 $%*+.\/:-]*$/),ue(o,"ALPHANUMERIC_CHARSET","0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:"),t.QrSegment=o}(fe||(fe={})),de=fe||(fe={}),he=de.QrCode||(de.QrCode={}),ue(pe=function t(e,n){a(this,t),this.ordinal=e,this.formatBits=n},"LOW",new pe(0,1)),ue(pe,"MEDIUM",new pe(1,0)),ue(pe,"QUARTILE",new pe(2,3)),ue(pe,"HIGH",new pe(3,2)),he.Ecc=pe,function(t){!function(t){var e=function(){function t(e,n){a(this,t),this.modeBits=e,this.numBitsCharCount=n}return ae(t,[{key:"numCharCountBits",value:function(t){return this.numBitsCharCount[Math.floor((t+7)/17)]}}]),t}();ue(e,"NUMERIC",new e(1,[10,12,14])),ue(e,"ALPHANUMERIC",new e(2,[9,11,13])),ue(e,"BYTE",new e(4,[8,16,16])),ue(e,"KANJI",new e(8,[8,10,12])),ue(e,"ECI",new e(7,[0,0,0])),t.Mode=e}(t.QrSegment||(t.QrSegment={}))}(fe||(fe={}));var me=fe.QrCode;var be=xt(Nt((function(t){var e,n=t.text,r=J(),i=tt(n),o=tt((function(){return[r(),i()]}));return e=function(t){var e=function(t,e){if(e<0)throw new RangeError("Border must be non-negative");for(var n=[],r=0;r<t.size;r++)for(var i=0;i<t.size;i++)t.getModule(i,r)&&n.push("M".concat(i+e,",").concat(r+e,"h1v1h-1z"));return'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '.concat(t.size+2*e," ").concat(t.size+2*e,'" stroke="none">\n<path d="').concat(n.join(" "),'"/>\n</svg>\n')}(me.encodeText(t[1],me.Ecc.MEDIUM),0);t[0].innerHTML=e},o.subscribe(e,!1),Vt("div",{class:"c8l6sa_qrCode",ref:r})})));var ke,we,_e=xt(Nt((function(t){var e,n=t.players,r=tt((function(){return!n().length})),i=tt((function(){return r()?"Пока что никто не подключился":n().map((function(t){return t.name})).join(", ")}));return Vt("div",{class:(e={},ue(e,"gKNX7W_playersList",!0),ue(e,"gKNX7W_noPlayers",r),e),text:i},(function(){}))})));ke="ZGsn8a_disabled",we="ZGsn8a_button";var Ee,Re,Ae,Ce=xt(Nt((function(t){var e,n=t.href,r=t.text,i=t.disabled;return Vt("a",{onclick:t.onСlick,href:n,text:r,class:(e={},ue(e,we,!0),ue(e,ke,i),e)})}))),Oe=xt(Nt((function(t){var e,n=t.text,r=t.disabled,i=t.onСlick,o=t.className;return Vt("button",{onclick:i,text:n,class:[(e={},ue(e,we,!0),ue(e,ke,r),e),o]})}))),Ne=Nt((function(t){return Vt((function(){Vt("h1",{text:"Ожидаем Игроков"}),Vt("div",{class:"hD0OlW_rowWrap"},(function(){Vt("div",{class:"hD0OlW_row"},(function(){Vt("div",{class:["hD0OlW_qrc",le]},(function(){be({text:t.playLink})})),Vt("div",{class:[le,"hD0OlW_infoCol"]},(function(){_e({players:t.playersList}),Vt("div",{class:"hD0OlW_buttonWrap"},(function(){Oe({text:function(){return t.pending()?"Начинаем...":"Начать Игру"},disabled:function(){return t.gameStartBlocked()||t.pending()},"onСlick":function(){return t.startGame()}})}))}))}))}))}))}));Ee="z40JMq_dot3",Re="z40JMq_dot2",Ae="z40JMq_dot1";var xe=Nt((function(t){return Vt("div",{class:"z40JMq_loading"},(function(){Vt("h1",(function(){Vt("span",{text:function(){return t?t():"Загрузка"}}),Vt("span",{class:"z40JMq_dots"},(function(){Vt("span",{class:Ae,text:"."}),Vt("span",{class:Re,text:"."}),Vt("span",{class:Ee,text:"."})}))}))}))}));var Se=xt(Nt((function(t){return Vt("div",{class:"YfKtJa_stageStatus",text:t})}))),Te=Nt((function(t){return Vt((function(){Vt("h1",{text:function(){return"Раунд "+t.round()}}),Vt("div",{class:"ZMux3W_captionWrap"},(function(){Vt("p",{class:"ZMux3W_caption",text:t.caption})})),Se((function(){return t.playersList().filter((function(t){return t.done})).map((function(){return"💡"})).join(" ")}))}))}));var Pe,Me,Ie=Nt((function(t){return Vt((function(){Vt("h1",{text:"Голосование"}),Vt("div",{class:"WyZIYq_card"},(function(){Vt("div",{class:"WyZIYq_img",attrs:{style:function(){return'background-image: url("/img/'.concat(t.votedCard(),'.jpg")')}}}),Vt("p",{class:"WyZIYq_caption",text:"Когда пишешь классную игру для себя и друзей"})})),Se((function(){return t.votes().map((function(t){switch(t.score){case 0:return"😐";case 1:return"😁";case 2:return"🤣"}})).join(" ")}))}))}));(Me=Pe||(Pe={})).Online="ONLINE",Me.Offline="OFFLINE",Me.Pending="PENDING";var Be=Nt((function(t){return Vt("tr",(function(){Vt("td",{text:function(){return"".concat(t.name," ").concat(function(){switch(t.status){case Pe.Offline:return"👻";case Pe.Pending:return"⏳";default:return t.done?"✔":""}}())}}),Vt("td",{text:function(){return t.score+""}})}))})),Le=xt(Nt((function(t){var e=tt((function(){var e=t().slice();return e.sort((function(t,e){return e.score-t.score})),e}));return Vt("table",{class:"oP-z-W_resultsTable"},(function(){Ht(e,Be)}))}))),De=Nt((function(t){return Vt((function(){Vt("h1",{text:"Результаты"}),Vt("div",{class:"CXK0_W_tableWrap"},(function(){Le(t.playersList)}))}))})),je=Nt((function(){var t=tt((function(){return new ge(ie())}));return Vt("div",{class:"sCXHnG_container"},(function(){At((function(){var e=t();if(e.loading())return xe();switch(e.stage()){case ee.Lobby:return Ne(e);case ee.Question:return Te(e);case ee.Vote:return Ie(e);case ee.Results:return De(e)}}))}))}));var Fe=xt(Nt((function(){return Vt("h1",{class:"UGpjbW_logo"},(function(){Vt("span",{class:"UGpjbW_top"},(function(){Vt("span",{text:"С"}),Vt("span",{text:"О"}),Vt("span",{text:"Б"}),Vt("span",{text:"Е"}),Vt("span",{text:"Р"}),Vt("span",{text:"И"})})),Vt("span",{class:"UGpjbW_bottom"},(function(){Vt("span",{text:"М"}),Vt("span",{text:"Е"}),Vt("span",{text:"М"})}))}))}))),Ue=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(t)).reduce((function(t,e){return t+=(e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_"}),"")},ze=xt(Nt((function(){var t="#host/"+Ue();return Vt((function(){return Ce({href:function(){return t},text:function(){return"Создать Комнату"}})}))}))),qe=Nt((function(){return Vt("div",{class:"_vR06G_container"},(function(){Fe(),Vt("div",{class:"_vR06G_menu"},(function(){ze()}))}))}));var Ve=function(t){"use strict";l(n,t);var e=w(n);function n(t,r,i){var o;return a(this,n),ue(b(o=e.call(this,Zt.Player,t,r,i)),"answers",o._state.select("answers")),ue(b(o),"players",o._state.select("players")),ue(b(o),"player",tt((function(){return o.state().players[o.playerId]}))),ue(b(o),"cards",tt((function(){return o.player().cards}))),ue(b(o),"selectedCard",tt((function(){var t=o.answers().find((function(t){return t.playerId===o.player().id}));return t?t.card:""}))),ue(b(o),"playerVote",tt((function(){return o.votes().find((function(t){return t.playerId===o.playerId}))||null}))),o}return ae(n,[{key:"answer",value:function(t){var e=this,n=this.state();n&&!n.error&&n.stage===ee.Question&&this.player().cards.includes(t)&&(D((function(){var n=e.state().answers.findIndex((function(t){return t.playerId===e.playerId}));e._state.select("answers").update((function(r){var i={playerId:e.playerId,card:t,votes:[]};n>-1?r[n]=i:r.push(i)})),e.makePlayerDone()})),this.emitPlayerData(t))}},{key:"vote",value:function(t){var e=this,n=this.state();n&&!n.error&&n.stage===ee.Vote&&(D((function(){var n=e.state().answerIndex,r=e.state().answers[n];if(r&&r.playerId!==e.playerId){var i=r.votes.findIndex((function(t){return t.playerId===e.playerId}));e.answers.select(n).update("votes",(function(n){var r={playerId:e.playerId,score:t};i>-1?n[i]=r:n.push(r)})),e.makePlayerDone()}})),this.emitPlayerData(t))}},{key:"ready",value:function(){var t=this.state();t&&!t.error&&t.stage===ee.Results&&(this.makePlayerDone(),this.emitPlayerData())}},{key:"emitPlayerData",value:function(t){this.emit($t.PlayerData,t)}},{key:"makePlayerDone",value:function(){this.players.update(this.playerId,(function(t){t.done=!0}))}}]),n}(ye);function He(t,e){var n="";try{n=localStorage.getItem(t)||e()}catch(t){n=e()}var r=J(n);return tt(r).subscribe((function(e){try{localStorage.setItem(t,e)}catch(t){}})),r}var We=xt(Nt((function(t){var e=t.label,n=t.placeholder,r=t.model;return Vt("label",{class:"U54bwG_wrap"},(function(){Vt("span",{text:e,class:"U54bwG_label"}),Vt("input",{type:"text",class:"U54bwG_input",placeholder:n||"",value:r||"",oninput:r&&function(t){return r(t.target.value)}})}))}))),Ye=Nt((function(t){var e=t.onLogin,n=He("PLAYER_ID",Ue),r=He("PLAYER_NAME",(function(){return""}));return Vt("div",{class:"_j3jiq_login"},(function(){We({label:function(){return"Как тебя зовут?"},placeholder:function(){return"Введи свое имя"},model:r}),Oe({text:function(){return"Присоединиться"},className:function(){return"_j3jiq_button"},disabled:function(){return!r().length},"onСlick":function(){e({name:r(),id:n()})}})}))}));var Ge,Xe,Ke=Nt((function(t){var e;return Vt("div",{class:(e={},ue(e,"_9In-RG_picture",!0),ue(e,"_9In-RG_selected",t.selected),e),attrs:{style:function(){return'background-image: url("/img/'.concat(t.id,'.jpg")')}}},(function(){return Vt("div",{class:"_9In-RG_overlay"})}))})),Qe=Nt((function(t){var e=function(){D((function(){c(!1),Math.abs(h())<30||(h()<0&&i(-1),h()>0&&i(1))})),setTimeout((function(){D((function(){n(r()+i()),i(0),u(!0),setTimeout((function(){return u(!1)}),30)}))}),200)},n=He("CARD_INDEX",(function(){return"0"})),r=tt((function(){return+n()})),i=J(0),o=tt((function(){var e=(5+r()%5)%5,n=(5+e-1)%5,i=(e+1)%5,o=t.cards();return[o[i],o[e],o[n]]})),s=tt((function(){return o()[1]})),a=J(0),u=J(!1),c=J(!1),l=J(0),f=J(0),h=tt((function(){return f()-l()})),p=tt((function(){var t="transition: transform ".concat(200,"ms ease-in-out");return u()?null:-1===i()?"transform: translateX(-100vw); ".concat(t):1===i()?"transform: translateX(100vw); ".concat(t):c()?"transform: translateX(".concat(h(),"px)"):t}));return Vt("div",{class:"_9In-RG_container",ontouchstart:function(e){var n=Date.now();n-a()<500&&t.answer(s()),a(n),i()||(c(!0),l(e.touches[0].clientX),f(e.touches[0].clientX))},ontouchmove:function(t){f(t.touches[0].clientX)},ontouchend:e,ontouchcancel:e,ondblclick:function(){t.answer(s())}},(function(){Vt("div",{class:"_9In-RG_pictures",attrs:{style:p}},(function(){Ht(o,(function(e){return Ke({id:e,selected:function(){return t.selectedCard()===e}})}))}))}))}));Ge="m3uyBq_selected",Xe="m3uyBq_button";var $e=Nt((function(t){var e=t.playerVote;return Vt("div",{class:"m3uyBq_container"},(function(){Vt("div",{class:"m3uyBq_buttons"},(function(){var n,r,i;Vt("button",{class:(n={},ue(n,Xe,!0),ue(n,Ge,(function(){return e()&&0===e().score})),n),onclick:function(){return t.vote(0)},text:"😐"}),Vt("button",{class:(r={},ue(r,Xe,!0),ue(r,Ge,(function(){return e()&&1===e().score})),r),onclick:function(){return t.vote(1)},text:"😁"}),Vt("button",{class:(i={},ue(i,Xe,!0),ue(i,Ge,(function(){return e()&&2===e().score})),i),onclick:function(){return t.vote(2)},text:"🤣"})}))}))}));var Je=Nt((function(t){return Vt("div",{class:"NULlaG_container"},(function(){Vt("div",(function(){Vt("h1",{text:"Результаты"}),Le(t.playersList)})),Oe({text:function(){return"Продолжить"},"onСlick":function(){return t.ready()}})}))})),Ze=Nt((function(){var t=J(""),e=J(""),n=tt((function(){return t()&&e()&&ie()?new Ve(ie(),t(),e()):null})),r=tt((function(){var t=n();return!!t&&t.player().id!==t.votedAnswer().playerId})),i=tt((function(){var t=n();return!!t&&t.player().done}));return Vt("div",{class:"pPW3gW_container"},(function(){At((function(){var o=n();if(!o)return Ye({onLogin:function(n){var r=n.name,i=n.id;D((function(){t(i),e(r)}))}});if(o.loading())return xe();switch(o.stage()){case ee.Lobby:return xe((function(){return"Ожидаем начала игры"}));case ee.Question:return Qe(o);case ee.Vote:return r()?$e(o):xe((function(){return"Ожидаем других игроков"}));case ee.Results:return i()?xe((function(){return"Ожидаем других игроков"})):Je(o)}}))}))})),tn=Nt((function(){return Vt((function(){At((function(){switch(re()){case"HOST":return je();case"PLAY":return Ze();default:return qe()}}))}))}));document.body.innerHTML="",document.body.appendChild(tn())}();
//# sourceMappingURL=index.21478e2f.js.map
